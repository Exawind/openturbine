# Add the executable target for unit tests
add_executable(openturbine_unit_tests)

# Add subdirectories for additional components
add_subdirectory(beams)
add_subdirectory(dof_management)
add_subdirectory(mass_elements)
add_subdirectory(math)
add_subdirectory(model)
add_subdirectory(solver)
add_subdirectory(state)
add_subdirectory(system)
add_subdirectory(utilities)

# Specify the source files for the unit tests
target_sources(openturbine_unit_tests PRIVATE utest_main.cpp)

# Link internal libraries to the unit test executable
target_link_libraries(openturbine_unit_tests PRIVATE
  openturbine_warnings
  openturbine_options
  OpenTurbine::openturbine_library
)

target_link_system_libraries(openturbine_unit_tests PRIVATE
  GTest::gtest
  GTest::gtest_main
)

# Include GoogleTest module and discover tests
include(GoogleTest)
gtest_discover_tests(openturbine_unit_tests PROPERTIES DISCOVERY_TIMEOUT 60000)
