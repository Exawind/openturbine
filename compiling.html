
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Compiling &#8212; OpenTurbine - Flexible Multibody Structural Dynamics Code for Wind Turbines</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'compiling';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Documentation" href="documentation.html" />
    <link rel="prev" title="OpenTurbine Development Plan" href="dev_plan.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
  
    <p class="title logo__title">OpenTurbine - Flexible Multibody Structural Dynamics Code for Wind Turbines</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    OpenTurbine
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="theory_guide.html">Theory Manual</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="flexible_beam.html">SO(3)-based GEBT Beam</a></li>
<li class="toctree-l2"><a class="reference internal" href="rigid_body.html">R3xSO(3)-based Rigid Body</a></li>
<li class="toctree-l2"><a class="reference internal" href="nonlinear_spring.html">R3-based geometrically nonlinear, constitutively linear spring</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="dev_guide.html">Developerâ€™s Guide</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dev_plan.html">OpenTurbine Development Plan</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Compiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Developer Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_docs.html">API Documentation</a></li>
<li class="toctree-l2"><a class="reference external" href="https://exawind.github.io/openturbine/docs/doxygen/html/index.html">API Documentation</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/exawind/openturbine" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/exawind/openturbine/edit/main/docs/compiling.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/exawind/openturbine/issues/new?title=Issue%20on%20page%20%2Fcompiling.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/compiling.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Compiling</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#spack-installation">Spack Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#development-using-spack-developer-workflow">Development using Spack Developer Workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-and-developing-in-openturbine-directly">Building and Developing in OpenTurbine Directly</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependencies">Dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-third-party-libraries">Installing Third Party Libraries</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-the-spack-repository-load-the-spack-environment-and-let-spack-learn-about-your-system">Clone the spack repository, load the spack environment, and let spack learn about your system</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-googletest">Install GoogleTest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-trilinos">Install Trilinos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#load-the-tpls-into-your-environment">Load the TPLs into your environment</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-openturbine">Building OpenTurbine</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-openturbine-and-setup-a-build-directory">Clone OpenTurbine and setup a build directory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-cmake">Configure cmake</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-and-test">Build and Test</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-options">Build Options</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="compiling">
<h1>Compiling<a class="headerlink" href="#compiling" title="Link to this heading">#</a></h1>
<p>OpenTurbine is developed in C++17 and is designed to be buildable on any
system with a compliant compiler. It utilizes
<a class="reference external" href="https://github.com/kokkos/kokkos">Kokkos</a> and
<a class="reference external" href="https://github.com/trilinos/Trilinos">Trilinos</a> to ensure performance
portability, allowing it to run on any platform supported by these projects.
We strive to test OpenTurbine on a wide range of platforms, including Linux
and macOS, although it is not feasible to cover every possible configuration.
This document outlines the build procedure verified to work on Linux (RHEL8).
For additional assistance tailored to your specific setup, please contact the
developers.</p>
<section id="spack-installation">
<h2>Spack Installation<a class="headerlink" href="#spack-installation" title="Link to this heading">#</a></h2>
<p>The easiest way to use OpenTurbine is through the <a class="reference external" href="https://spack.io/">Spack</a>
package manager. Once you have downloaded and set up Spack for your
environment, simply run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>install<span class="w"> </span>openturbine
</pre></div>
</div>
<p>To see the latest list of supported configuration options, check out the
package file or run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>info<span class="w"> </span>openturbine
</pre></div>
</div>
<p>Once it is installed, you can load the OpenTurbine library and its
dependencies into your environment using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>load<span class="w"> </span>openturbine
</pre></div>
</div>
</section>
<section id="development-using-spack-developer-workflow">
<h2>Development using Spack Developer Workflow<a class="headerlink" href="#development-using-spack-developer-workflow" title="Link to this heading">#</a></h2>
<p>One easy way to set up a development environment for OpenTurbine is to use
Spackâ€™s Developer Workflow. To setup an environment for working on
OpenTurbine, setup Spack and then run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>openturbine
<span class="nb">cd</span><span class="w"> </span>openturbine
spack<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>-d<span class="w"> </span>.
spack<span class="w"> </span>env<span class="w"> </span>activate<span class="w"> </span>.
spack<span class="w"> </span>add<span class="w"> </span>openturbine+tests
spack<span class="w"> </span>install
spack<span class="w"> </span>develop<span class="w"> </span>openturbine@main
spack<span class="w"> </span>concretize<span class="w"> </span>-f
spack<span class="w"> </span>install
</pre></div>
</div>
<p>OpenTurbineâ€™s source code will now be located in the openturbine folder, but
can be accessed from anywhere by</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>-c<span class="w"> </span>openturbine
</pre></div>
</div>
<p>After editing the code here, it can be rebuilt by running</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>install
</pre></div>
</div>
<p>To run the tests, first access the build folder through the spack command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>-b<span class="w"> </span>openturbine
</pre></div>
</div>
<p>Next, the tests can be run either through ctest or directly from the unit
test or regression test executables</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest
./tests/unit_tests/openturbine_unit_tests
./tests/regression_tests/openturbine_regression_tests
</pre></div>
</div>
<p>You can also build OpenTurbine from this folder using standard make
commands.</p>
<p>For more information, please see Spackâ€™s documentation:
<a class="reference external" href="https://spack-tutorial.readthedocs.io/en/latest/tutorial_developer_workflows.html">https://spack-tutorial.readthedocs.io/en/latest/tutorial_developer_workflows.html</a></p>
</section>
<section id="building-and-developing-in-openturbine-directly">
<h2>Building and Developing in OpenTurbine Directly<a class="headerlink" href="#building-and-developing-in-openturbine-directly" title="Link to this heading">#</a></h2>
<p>The following sections outline how to build and develop OpenTurbine without
Spackâ€™s Developer Workflows. The main complication here is that developers
will have to manage their environment and dependencies manually, which may
be an unnecessary complication or a freeing feature, depending on your
perspective.</p>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading">#</a></h2>
<p>Before building OpenTurbine, youâ€™ll need the following:</p>
<ul class="simple">
<li><p>C++ compiler that supports the C++17 standard</p></li>
<li><p><a class="reference external" href="https://cmake.org/">CMake</a>: the default build system for C++ projects,
version 3.21 or later</p></li>
<li><p><a class="reference external" href="https://github.com/kokkos/kokkos">Kokkos</a>: core programming model for
performance portability</p></li>
<li><p><a class="reference external" href="https://github.com/kokkos/kokkoskernels">KokkosKernels</a>: performance
portable linear algebra library</p></li>
<li><p><a class="reference external" href="https://github.com/trilinos/Trilinos">Trilinos</a>: primarily for the
Amesos2 sparse direct linear solver package</p></li>
<li><p><a class="reference external" href="https://github.com/google/googletest">GoogleTest</a>: unit testing package</p></li>
</ul>
</section>
<section id="installing-third-party-libraries">
<h2>Installing Third Party Libraries<a class="headerlink" href="#installing-third-party-libraries" title="Link to this heading">#</a></h2>
<p>There are several methods to obtain the necessary Third Party Libraries
(TPLs) for building OpenTurbine, however the simplest is to use the
<a class="reference external" href="https://spack.io/">spack</a> package manager. Spack offers a
comprehensive set of features for development and dependency management. The
following is a quick-start guide for installing and loading the TPLs required
to build OpenTurbine.</p>
<section id="clone-the-spack-repository-load-the-spack-environment-and-let-spack-learn-about-your-system">
<h3>Clone the spack repository, load the spack environment, and let spack learn about your system<a class="headerlink" href="#clone-the-spack-repository-load-the-spack-environment-and-let-spack-learn-about-your-system" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:spack/spack.git
<span class="nb">source</span><span class="w"> </span>spack/share/spack/setup-env.sh
spack<span class="w"> </span>compiler<span class="w"> </span>find
spack<span class="w"> </span>external<span class="w"> </span>find
</pre></div>
</div>
</section>
<section id="install-googletest">
<h3>Install GoogleTest<a class="headerlink" href="#install-googletest" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>install<span class="w"> </span>googletest
</pre></div>
</div>
</section>
<section id="install-trilinos">
<h3>Install Trilinos<a class="headerlink" href="#install-trilinos" title="Link to this heading">#</a></h3>
<p>To build OpenTurbine, Kokkos Kernels must be configured to use the LAPACK
and BLAS TPLs. For GPU builds, Trilinos should be compiled with support for
the Basker linear solver. Additionally, we typically disable EPetra to avoid
deprecation warnings. As of this writing, OpenTurbine is compatible with
Trilinos version 16.0.0, which is the latest and default version in spack.</p>
<p>For a simple serial build</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>install<span class="w"> </span>trilinos~epetra<span class="w"> </span>^kokkos-kernels+blas+lapack
</pre></div>
</div>
<p>Trilinos can also be compiled with OpenMP support for parallelism on CPU based machines</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>install<span class="w"> </span>trilinos~epetra+openmp<span class="w"> </span>^kokkos-kernels+blas+lapack
</pre></div>
</div>
<p>If building for CUDA platforms, Trilinos must be configured with CUDA support</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>install<span class="w"> </span>trilinos~epetra+basker+cuda<span class="w"> </span>^kokkos-kernels+blas+lapack
</pre></div>
</div>
<p>If building for ROCm platforms, Trilinos must be configured with ROCm support</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>install<span class="w"> </span>trilinos~epetra+basker+rocm<span class="w"> </span>^kokkos-kernels+blas+lapack
</pre></div>
</div>
<p>Trilinos can be built with or without MPI support.</p>
</section>
<section id="load-the-tpls-into-your-environment">
<h3>Load the TPLs into your environment<a class="headerlink" href="#load-the-tpls-into-your-environment" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack<span class="w"> </span>load<span class="w"> </span>googletest
spack<span class="w"> </span>load<span class="w"> </span>trilinos
</pre></div>
</div>
<p>Trilinos can be compiled with support for various platforms. While it is
assumed that OpenTurbine will inherit compatibility with these platforms,
they have not been tested at the time of writing.</p>
<p>If you choose not to use Spack, you must manually build all dependencies.
Please ensure that the <code class="docutils literal notranslate"><span class="pre">Amesos2_DIR</span></code>, <code class="docutils literal notranslate"><span class="pre">GTest_DIR</span></code>, and <code class="docutils literal notranslate"><span class="pre">KokkosKernels_DIR</span></code>
environment variables are correctly set for these packages. Alternatively,
make sure that CMakeâ€™s <code class="docutils literal notranslate"><span class="pre">find_package</span></code> utility can locate them.</p>
</section>
</section>
<section id="building-openturbine">
<h2>Building OpenTurbine<a class="headerlink" href="#building-openturbine" title="Link to this heading">#</a></h2>
<p>The following is written assuming the TPLs in hand and the environment
configured as described above.</p>
<section id="clone-openturbine-and-setup-a-build-directory">
<h3>Clone OpenTurbine and setup a build directory<a class="headerlink" href="#clone-openturbine-and-setup-a-build-directory" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:Exawind/openturbine.git
<span class="nb">cd</span><span class="w"> </span>openturbine
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
</pre></div>
</div>
</section>
<section id="configure-cmake">
<h3>Configure cmake<a class="headerlink" href="#configure-cmake" title="Link to this heading">#</a></h3>
<p>For a CPU-based build which includes building unit tests, use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>../
</pre></div>
</div>
<p>If Trilinos was built with CUDA support, you will need to use the nvcc_wrapper
for compilation</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>../<span class="w"> </span>-DCMAKE_CXX_COMPILER<span class="o">=</span>nvcc_wrapper
</pre></div>
</div>
<p>If Trilinos was built with ROCm support, you will need to use the hipcc program
for compilation</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>../<span class="w"> </span>-DCMAKE_CXX_COMPILER<span class="o">=</span>hipcc
</pre></div>
</div>
</section>
<section id="build-and-test">
<h3>Build and Test<a class="headerlink" href="#build-and-test" title="Link to this heading">#</a></h3>
<p>Currently, OpenTurbine builds several shared libraries by default. To ensure
that their unit tests pass, these libraries must be copied into the directory
where the tests are executed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>-j
cp<span class="w"> </span>src/*.dll<span class="w"> </span>tests/unit_tests/
ctest<span class="w"> </span>--output-on-failure
</pre></div>
</div>
<p>Once built, the unit test executable can also be run directly from the build
directory</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./tests/unit_tests/openturbine_unit_tests
</pre></div>
</div>
</section>
</section>
<section id="build-options">
<h2>Build Options<a class="headerlink" href="#build-options" title="Link to this heading">#</a></h2>
<p>OpenTurbine has several build options which can be set either when running
CMake from the command line or through a GUI such as ccmake.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_CLANG_TIDY</span></code> enables the Clang-Tidy static analysis tool</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_COVERAGE</span></code> enables code coverage analysis using gcov</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_CPPCHECK</span></code> enables the CppCheck static analysis tool</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_IPO</span></code> enables link time optimization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_PCH</span></code> builds precompiled headers to potentially decrease
compilation time</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_SANITIZER_ADDRESS</span></code> enables the address sanitizer runtime
analysis tool</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_SANITIZER_LEAK</span></code> enables the leak sanitizer runtime
analysis tool</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_SANITIZER_MEMORY</span></code> enables the memory sanitizer runtime
analysis tool</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_SANITIZER_THREAD</span></code> enables the thread sanitizer runtime
analysis tool</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_SANITIZER_UNDEFINED</span></code> enables the undefined behavior
sanitizer runtime analysis tool</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_TESTS</span></code> builds OpenTurbineâ€™s test suite</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_UNITY_BUILD</span></code> uses unity builds to potentially decrease
compilation time</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_ENABLE_VTK</span></code> builds OpenTurbine with VTK support for
visualization in tests. Will need the VTK TPL to be properly configured</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OpenTurbine_WARNINGS_AS_ERRORS</span></code> treats warnings as errors, including
warnings from static analysis tools</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="dev_plan.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">OpenTurbine Development Plan</p>
      </div>
    </a>
    <a class="right-next"
       href="documentation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Documentation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#spack-installation">Spack Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#development-using-spack-developer-workflow">Development using Spack Developer Workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-and-developing-in-openturbine-directly">Building and Developing in OpenTurbine Directly</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependencies">Dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-third-party-libraries">Installing Third Party Libraries</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-the-spack-repository-load-the-spack-environment-and-let-spack-learn-about-your-system">Clone the spack repository, load the spack environment, and let spack learn about your system</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-googletest">Install GoogleTest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-trilinos">Install Trilinos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#load-the-tpls-into-your-environment">Load the TPLs into your environment</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-openturbine">Building OpenTurbine</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-openturbine-and-setup-a-build-directory">Clone OpenTurbine and setup a build directory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-cmake">Configure cmake</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-and-test">Build and Test</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-options">Build Options</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By National Renewable Energy Laboratory (NREL) and Sandia National Laboratories (SNL)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2023 - Present, MIT License.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>