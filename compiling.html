

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Compiling &#8212; OpenTurbine</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'compiling';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Docs" href="documentation.html" />
    <link rel="prev" title="OpenTurbine Development Plan" href="dev_plan.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    <p class="title logo__title">OpenTurbine</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    OpenTurbine: A flexible multibody structural dynamics code for wind turbines
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials / How-To</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_file.html">Input File</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="dev_guide.html">Developer’s Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dev_plan.html">OpenTurbine Development Plan</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Compiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation.html">The Docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Developer Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_docs.html">API Documentation</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/exawind/openturbine" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/exawind/openturbine/edit/main/docs/compiling.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/exawind/openturbine/issues/new?title=Issue%20on%20page%20%2Fcompiling.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/compiling.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Compiling</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependencies">Dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-kokkos">Installing Kokkos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-system">Build system</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture-options">Architecture options</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-openmp">OTURB_ENABLE_OPENMP</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-cuda">OTURB_ENABLE_CUDA</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-rocm">OTURB_ENABLE_ROCM</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-dpcpp">OTURB_ENABLE_DPCPP</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-precision">OTURB_PRECISION</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-openturbine-specific-options">Other OpenTurbine specific options</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-tests">OTURB_ENABLE_TESTS</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-all-warnings">OTURB_ENABLE_ALL_WARNINGS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-cmake-options">General CMake options</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-install-prefix">CMAKE_INSTALL_PREFIX</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-build-type">CMAKE_BUILD_TYPE</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-cxx-compiler">CMAKE_CXX_COMPILER</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-cxx-flags">CMAKE_CXX_FLAGS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-by-step">Step by step</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#load-or-install-dependencies">1. Load or install dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-the-repository">2. Clone the repository</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-and-build">3. Configure and build</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-your-build">4. Test your build</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quirks-and-issues">Quirks and issues</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gtest-from-conda-forge">GTest from conda-forge</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="compiling">
<span id="id1"></span><h1>Compiling<a class="headerlink" href="#compiling" title="Permalink to this heading">#</a></h1>
<p>OpenTurbine is written in C++ and compiles into an both an executable and
a static or shared library. The procedure and considerations for compiling
are described here.</p>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading">#</a></h2>
<p>The third party dependencies used in OpenTurbine are listed below.
These can be installed by any means appropriate to the target
use. For HPC, it is recommended to use vendor specific libraries
when available. For workstations, package managers such as
conda, APT, and Homebrew will provide the easiest experience
for linking and runtime path searches.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://cmake.org/">CMake</a> version 3.20 or higher</p></li>
<li><p>C++ compiler that supports the C++14 standard;</p>
<ul>
<li><p>GCC 5 or higher</p></li>
<li><p>LLVM Clang 7 or higher</p></li>
<li><p>Intel 2020 (oneAPI) or higher</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/kokkos/kokkos">Kokkos</a> math portability library (see <a class="reference internal" href="#installing-kokkos"><span class="std std-ref">Installing Kokkos</span></a>)</p></li>
<li><p>OS: OpenTurbine is regularly tested on Linux and macOS</p></li>
<li><p>(Optional) Google Test (gtest) for the test infrastructure (conda-forge)</p></li>
<li><p>(Optional) clang-format for linting (conda-forge or brew)</p></li>
</ul>
</section>
<section id="installing-kokkos">
<span id="id2"></span><h2>Installing Kokkos<a class="headerlink" href="#installing-kokkos" title="Permalink to this heading">#</a></h2>
<p>OpenTurbine relies heavily on Kokkos for portability between systems,
compilers, and hardware types. It is at the core of the this software.
Therefore, the Kokkos library used should be tuned to your specific
use case. See the <a class="reference external" href="https://kokkos.github.io/kokkos-core-wiki/building.html">Kokkos documentation</a>
for instructions on building that library.</p>
<p>For use in OpenTurbine, the Kokkos library must be available
within a typical search path or you must provide the search
path via the <code class="docutils literal notranslate"><span class="pre">Kokkos_DIR</span></code> environment variable. This will
typically be the install location from your Kokkos build.
It should be set in the shell session where you’re compiling
OpenTurbine. See the example below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configure CMake in OpenTurbine without setting the environment variable</span>
cmake<span class="w"> </span>..

<span class="c1"># Results in this error:</span>
<span class="c1"># CMake Error at src/CMakeLists.txt:3 (find_package):</span>
<span class="c1">#   By not providing &quot;FindKokkos.cmake&quot; in CMAKE_MODULE_PATH this project has</span>
<span class="c1">#   asked CMake to find a package configuration file provided by &quot;Kokkos&quot;, but</span>
<span class="c1">#   CMake did not find one.</span>
<span class="c1"># </span>
<span class="c1">#   Could not find a package configuration file provided by &quot;Kokkos&quot; with any</span>
<span class="c1">#   of the following names:</span>
<span class="c1"># </span>
<span class="c1">#     KokkosConfig.cmake</span>
<span class="c1">#     kokkos-config.cmake</span>
<span class="c1"># </span>
<span class="c1">#   Add the installation prefix of &quot;Kokkos&quot; to CMAKE_PREFIX_PATH or set</span>
<span class="c1">#   &quot;Kokkos_DIR&quot; to a directory containing one of the above files.  If &quot;Kokkos&quot;</span>
<span class="c1">#   provides a separate development package or SDK, be sure it has been</span>
<span class="c1">#   installed.</span>

<span class="c1"># Set the environment variable</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">Kokkos_DIR</span><span class="o">=</span>~/Development/kokkos/install

<span class="c1"># Test that is was set correctly</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$Kokkos_DIR</span>
<span class="c1"># Displays:</span>
<span class="c1"># ~/Development/kokkos/install</span>

<span class="c1"># Reconfigure CMake in OpenTurbine</span>
cmake<span class="w"> </span>..
</pre></div>
</div>
</section>
<section id="build-system">
<h2>Build system<a class="headerlink" href="#build-system" title="Permalink to this heading">#</a></h2>
<p>The build system is defined entirely within a CMake project.
It is configured via configuration variables that accept either
boolean (<code class="docutils literal notranslate"><span class="pre">ON</span></code>/<code class="docutils literal notranslate"><span class="pre">OFF</span></code>) or string arguments. This is typically
done via the command line interface for CMake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>..<span class="w"> </span>-DBOOL_FLAG<span class="o">=</span>ON<span class="w"> </span>-DSTRING_FLAG<span class="o">=</span><span class="s2">&quot;value&quot;</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://cmake.org/documentation/">CMake documentation</a>
for a full reference on CMake. The primary targets available to build
are listed below.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Target</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>openturbine</p></td>
<td><p>Exe</p></td>
<td><p>Primary executable including the <code class="docutils literal notranslate"><span class="pre">main</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>openturbine_obj</p></td>
<td><p>Lib</p></td>
<td><p>Library including all code used by <code class="docutils literal notranslate"><span class="pre">main</span></code></p></td>
</tr>
<tr class="row-even"><td><p>openturbine_unit_tests</p></td>
<td><p>Exe</p></td>
<td><p>Unit test driver executable including all tests and links to the Google Test</p></td>
</tr>
</tbody>
</table>
<section id="architecture-options">
<h3>Architecture options<a class="headerlink" href="#architecture-options" title="Permalink to this heading">#</a></h3>
<section id="oturb-enable-openmp">
<h4>OTURB_ENABLE_OPENMP<a class="headerlink" href="#oturb-enable-openmp" title="Permalink to this heading">#</a></h4>
<p>Enable OpenMP threading support for CPU builds. It is not recommended to</p>
<p>combine this with GPU builds. Default: OFF</p>
</section>
<section id="oturb-enable-cuda">
<h4>OTURB_ENABLE_CUDA<a class="headerlink" href="#oturb-enable-cuda" title="Permalink to this heading">#</a></h4>
<p>Enable <a class="reference external" href="https://developer.nvidia.com/cuda-zone">NVIDIA CUDA GPU</a> builds. Default: OFF</p>
</section>
<section id="oturb-enable-rocm">
<h4>OTURB_ENABLE_ROCM<a class="headerlink" href="#oturb-enable-rocm" title="Permalink to this heading">#</a></h4>
<p>Enable <a class="reference external" href="https://rocmdocs.amd.com/en/latest/">AMD ROCm GPU</a> builds. Default: OFF</p>
</section>
<section id="oturb-enable-dpcpp">
<span id="id3"></span><h4>OTURB_ENABLE_DPCPP<a class="headerlink" href="#oturb-enable-dpcpp" title="Permalink to this heading">#</a></h4>
<p>Enable <a class="reference external" href="https://software.intel.com/content/www/us/en/develop/tools/oneapi.html">Intel OneAPI DPC++</a> builds. Default: OFF</p>
</section>
<section id="oturb-precision">
<h4>OTURB_PRECISION<a class="headerlink" href="#oturb-precision" title="Permalink to this heading">#</a></h4>
<p>Specifies the floating point precision; can be one of “SINGLE” or “DOUBLE”. Default: DOUBLE</p>
</section>
</section>
<section id="other-openturbine-specific-options">
<h3>Other OpenTurbine specific options<a class="headerlink" href="#other-openturbine-specific-options" title="Permalink to this heading">#</a></h3>
<section id="oturb-enable-tests">
<h4>OTURB_ENABLE_TESTS<a class="headerlink" href="#oturb-enable-tests" title="Permalink to this heading">#</a></h4>
<p>Adds the testing infrastructure to the build. Default: OFF</p>
</section>
<section id="oturb-enable-all-warnings">
<h4>OTURB_ENABLE_ALL_WARNINGS<a class="headerlink" href="#oturb-enable-all-warnings" title="Permalink to this heading">#</a></h4>
<p>Enable compiler warnings during build. Default: OFF</p>
</section>
</section>
<section id="general-cmake-options">
<h3>General CMake options<a class="headerlink" href="#general-cmake-options" title="Permalink to this heading">#</a></h3>
<section id="cmake-install-prefix">
<h4>CMAKE_INSTALL_PREFIX<a class="headerlink" href="#cmake-install-prefix" title="Permalink to this heading">#</a></h4>
<p>The directory where the compiled executables and libraries as well as headers
are installed. For example, passing
<code class="docutils literal notranslate"><span class="pre">-DCMAKE_INSTALL_PREFIX=${HOME}/software</span></code> will install the executables in
<code class="docutils literal notranslate"><span class="pre">${HOME}/software/bin</span></code> when the user executes the <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> command.</p>
</section>
<section id="cmake-build-type">
<h4>CMAKE_BUILD_TYPE<a class="headerlink" href="#cmake-build-type" title="Permalink to this heading">#</a></h4>
<p>Controls the optimization levels for compilation. This variable can take the
following values:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Typical flags</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RELEASE</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-O3</span> <span class="pre">-DNDEBUG</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>DEBUG</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-g</span></code></p></td>
</tr>
<tr class="row-even"><td><p>RelWithDebInfo</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-O2</span> <span class="pre">-g</span></code></p></td>
</tr>
</tbody>
</table>
<p>Example: <code class="docutils literal notranslate"><span class="pre">-DCMAKE_BUILD_TYPE:STRING=RELEASE</span></code></p>
</section>
<section id="cmake-cxx-compiler">
<h4>CMAKE_CXX_COMPILER<a class="headerlink" href="#cmake-cxx-compiler" title="Permalink to this heading">#</a></h4>
<p>Set the C++ compiler used for compiling the code.</p>
<p>For Intel DPC++ builds (see <a class="reference internal" href="#oturb-enable-dpcpp"><span class="std std-ref">OTURB_ENABLE_DPCPP</span></a>) this should be
set to <code class="docutils literal notranslate"><span class="pre">dpcpp</span></code>.</p>
</section>
<section id="cmake-cxx-flags">
<h4>CMAKE_CXX_FLAGS<a class="headerlink" href="#cmake-cxx-flags" title="Permalink to this heading">#</a></h4>
<p>Additional flags to be passed to the C++ compiler during compilation.</p>
</section>
</section>
</section>
<section id="step-by-step">
<h2>Step by step<a class="headerlink" href="#step-by-step" title="Permalink to this heading">#</a></h2>
<section id="load-or-install-dependencies">
<h3>1. Load or install dependencies<a class="headerlink" href="#load-or-install-dependencies" title="Permalink to this heading">#</a></h3>
<p>If you are on an HPC system that provides Modules Environment, load the
necessary dependencies. If targeting GPUs, load CUDA
modules.</p>
</section>
<section id="clone-the-repository">
<h3>2. Clone the repository<a class="headerlink" href="#clone-the-repository" title="Permalink to this heading">#</a></h3>
<p>This creates a local copy of the software repository
from GitHub.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/exawind/openturbine.git
</pre></div>
</div>
</section>
<section id="configure-and-build">
<h3>3. Configure and build<a class="headerlink" href="#configure-and-build" title="Permalink to this heading">#</a></h3>
<p>This step configures the CMake project and compiles the
code into a “build/” directory within the repository directory.
Be sure to note the location from where the commands are run.
The final step can be run with no additional arguments
to compile all targets or with a specific target. No arguments
instructs to compile all targets.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>openturbine/build
<span class="nb">cd</span><span class="w"> </span>openturbine/build

cmake<span class="w"> </span>..<span class="w"> </span>-DOTURB_ENABLE_TESTS:BOOL<span class="o">=</span>ON
make
</pre></div>
</div>
<p>Upon successfully building, two executables should be available
in the build directory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">openturbine</span></code>: the main driver for the software</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">openturbine_unit_tests</span></code>: the driver for the unit tests</p></li>
</ul>
</section>
<section id="test-your-build">
<h3>4. Test your build<a class="headerlink" href="#test-your-build" title="Permalink to this heading">#</a></h3>
<p>Ensure the code is compiled and linked correctly by running the
included tests. These involve low-level unit tests as well
as high-level regression tests. See Testing for more info.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest<span class="w"> </span>--output-on-failure
</pre></div>
</div>
</section>
</section>
<section id="quirks-and-issues">
<h2>Quirks and issues<a class="headerlink" href="#quirks-and-issues" title="Permalink to this heading">#</a></h2>
<p>Here’s a list of known issues or oddities and workarounds.</p>
<section id="gtest-from-conda-forge">
<h3>GTest from conda-forge<a class="headerlink" href="#gtest-from-conda-forge" title="Permalink to this heading">#</a></h3>
<p>If you’ve installed Google Test (GTest) with conda, you
must also install Google Mock (GMock) as it is a dependency
but it is not automatically included. The command below
installs both.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>gtest<span class="w"> </span>gmock<span class="w"> </span>-c<span class="w"> </span>conda-forge
</pre></div>
</div>
<p>On Linux with GTest from conda-forge and the GNU
compiler, you may see this error:
<code class="docutils literal notranslate"><span class="pre">undefined</span> <span class="pre">reference</span> <span class="pre">to</span> <span class="pre">'std::__throw_bad_array_new_length()&#64;GLIBCXX_3.4.29'</span></code>.
In that case, upgrade to GCC 11 (<code class="docutils literal notranslate"><span class="pre">g++-11</span></code>). GTest in conda-forge is linked
to <code class="docutils literal notranslate"><span class="pre">GLIBCXX_3.4.29</span></code> but GCC 10 has <code class="docutils literal notranslate"><span class="pre">GLIBCXX_3.4.28</span></code>.
Check installed versions with this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>strings<span class="w"> </span>/lib/x86_64-linux-gnu/libstdc++.so.6<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>GLIBCXX
</pre></div>
</div>
<p>For Ubuntu 20.04, instructions on upgrading GCC are <a class="reference external" href="https://lindevs.com/install-gcc-on-ubuntu">here</a>.</p>
<p>On macOS with GTest from conda-forge, you must include the
GTest directory in the library search path since it will not
be found automatically by rpath.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">DYLD_LIBRARY_PATH</span><span class="o">=</span>~/miniconda3/envs/openturbine/lib<span class="w">  </span><span class="c1"># customize this to your path</span>
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="dev_plan.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">OpenTurbine Development Plan</p>
      </div>
    </a>
    <a class="right-next"
       href="documentation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">The Docs</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependencies">Dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-kokkos">Installing Kokkos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-system">Build system</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture-options">Architecture options</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-openmp">OTURB_ENABLE_OPENMP</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-cuda">OTURB_ENABLE_CUDA</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-rocm">OTURB_ENABLE_ROCM</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-dpcpp">OTURB_ENABLE_DPCPP</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-precision">OTURB_PRECISION</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-openturbine-specific-options">Other OpenTurbine specific options</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-tests">OTURB_ENABLE_TESTS</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oturb-enable-all-warnings">OTURB_ENABLE_ALL_WARNINGS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-cmake-options">General CMake options</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-install-prefix">CMAKE_INSTALL_PREFIX</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-build-type">CMAKE_BUILD_TYPE</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-cxx-compiler">CMAKE_CXX_COMPILER</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-cxx-flags">CMAKE_CXX_FLAGS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-by-step">Step by step</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#load-or-install-dependencies">1. Load or install dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-the-repository">2. Clone the repository</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-and-build">3. Configure and build</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-your-build">4. Test your build</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quirks-and-issues">Quirks and issues</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gtest-from-conda-forge">GTest from conda-forge</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By National Renewable Energy Laboratory
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>